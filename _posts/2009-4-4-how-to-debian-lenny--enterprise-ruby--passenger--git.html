---
layout: post
title: "How-To: Debian (Lenny) + Enterprise Ruby + Passenger + Git"
---
<i>Editor's Note: I am continually amazed by and grateful for the thousands of internet denizens who write about their problems and the solutions they have found. This post is one feeble attempt at contributing to that collective knowledge; hopefully many more will follow.</i><br /><br />I decided to rework my <a href="http://www.andrewpbrett.com/">home page</a> as a simple Rails application, mainly to take advantage of the way Rails handles views/templates. Is this overkill? Probably. Are there a ton of other tools I could have used? Definitely. It's a classic case of holding a hammer and taking a look around for nails. But I digress. I also decided to set up Enterprise Ruby/Rails, Passenger, and Git, all of which are totally overkill at the moment but will hopefully lay a groundwork for things to come. Again, I digress.<br /><br />The first thing we'll need to do, assuming we're working with a fresh install of Debian (5.0 - Lenny), is install libraries for Ruby, Apache, and mySQL.<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">apt-get install build-essential apache2 ruby1.8 zlib1g-dev libssl-dev mysql-server mysql-common libmysqlclient15-dev libmysqlclient15off apache2-prefork-dev libreadline5-dev</div><br />(I have no idea what a couple of those items are: I was prompted to install them later on in the process, so if you install them up front it will go more smoothly)<br /><br />Get the <a href="http://www.rubyenterpriseedition.com/download.html">most recent version</a> of Ruby Enterprise Edition.<br /><br />For me it was:<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">wget http://rubyforge.org/frs/download.php/51100/ruby-enterprise-1.8.6-<span style="color:red;">20090201</span>.tar.gz</div><br />Note the Enterprise Ruby version in red, we'll need it later.<br /><br />The Ruby Enterprise installer looks in <span style="font-family:monospace;">/usr/bin/ruby</span> for Ruby, which doesn't currently exist; link up your install in ruby1.8 by doing<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">ln -s /usr/bin/ruby1.8 /usr/bin/ruby</div><br />Now, using your own version of Enterprise Ruby from above in place of the ###...:<br /><br />Unarchive:<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">tar xzvf ruby-enterprise-########.tar.gz</div><br />Run the installer:<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">./ruby-enterprise-########/installer</div><br />Follow the prompts. Should be self-explanatory.<br /><br />Next, remove the old link to ruby1.8:<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">rm /usr/bin/ruby</div><br />and link up to the enterprise ruby goodness:<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">ln -s /opt/ruby-enterprise-1.8.6-########/bin/rake /usr/bin/rake<br />ln -s /opt/ruby-enterprise-1.8.6-########/bin/gem /usr/bin/gem<br />ln -s /opt/ruby-enterprise-1.8.6-########/bin/rails /usr/bin/rails<br />ln -s /opt/ruby-enterprise-1.8.6-########/bin/ruby /usr/bin/ruby</div><br />Now install Passenger:<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">/opt/ruby-enterprise-1.8.6-########/bin/passenger-install-apache2-module</div><br />As you may have noticed, the Enterprise Ruby install directs you to add some lines to Apache's config file. If you're using Apache2, open that up with<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">vi /etc/apache2/apache2.conf</div><br />and add the following, replacing the gem version in red (2.1.2 at this time) with your own gem version.<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">LoadModule passenger_module /opt/ruby-enterprise-1.8.6-########/lib/ruby/gems/1.8/gems/passenger-<span style="color:red;">2.1.2</span>/ext/apache2/mod_passenger.so<br />PassengerRoot /opt/ruby-enterprise-1.8.6-########/lib/ruby/gems/1.8/gems/passenger-<span style="color:red;">2.1.2</span><br />PassengerRuby /opt/ruby-enterprise-1.8.6-########/bin/ruby</div><br />That's it for Enterprise Ruby and Passenger! Next up, Git:<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">aptitude install build-essential gettext zlib1g-dev</div><br />Get Git - right now it's:<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">wget http://kernel.org/pub/software/scm/git/git-1.6.2.1.tar.gz</div><br />Unarchive; configure; make; install!<br /><br /><div style="font-family: monospace;background-color:#FFEE8B;">tar xvzf git-1.6.2.1.tar.gz<br />cd git-1.6.2.1<br />./configure<br />make<br />make install</div><br />You'll likely want to set up Virtual Hosts on Apache as well; this gets a little bit specific for the purposes of this how-to so I'll leave it at <a href="http://httpd.apache.org/docs/1.3/vhosts/">RTFM</a> :-)